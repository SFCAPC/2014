!function($,t){$.fn.drawDoughnutChart=function(t,e){function n(t,e){var n=-1.57,a=6.2831,o=4.7131,i=g+y(n)*t,r=v+T(n)*t,s=g+y(n)*e,u=v+T(n)*e,m=g+y(o)*t,l=v+T(o)*t,p=g+y(o)*e,f=v+T(o)*e,c=["M",i,r,"A",t,t,0,1,1,m,l,"Z","M",p,f,"A",e,e,0,1,0,s,u,"Z"];return c=c.join(" ")}function a(e){var n=$(this).data().order;R.text(t[n].title+": $"+t[n].value.toLocaleString()).fadeIn(200),b.onPathEnter.apply($(this),[e,t])}function o(e){R.hide(),b.onPathLeave.apply($(this),[e,t])}function i(t){R.css({top:t.pageY+b.tipOffsetY,left:t.pageX-R.width()/2+b.tipOffsetX})}function r(e){var a=-S/2,o=1;if(b.animation&&b.animateRotate&&(o=e),s(e,N),I.attr("opacity",e),1===t.length&&4.7122<o*(t[0].value/N*(2*S))+a)return void O[0].attr("d",n(E,M));for(var i=0,r=t.length;r>i;i++){var u=o*(t[i].value/N*(2*S)),m=a+u,l=(m-a)%(2*S)>S?1:0,p=g+y(a)*E,f=v+T(a)*E,c=g+y(a)*M,d=v+T(a)*M,h=g+y(m)*E,w=v+T(m)*E,x=g+y(m)*M,C=v+T(m)*M,A=["M",p,f,"A",E,E,0,l,1,h,w,"L",x,C,"A",M,M,0,l,0,c,d,"Z"];O[i].attr("d",A.join(" ")),a+=u}}function s(t,e){Y.css({opacity:t}).text("$"+e.toLocaleString())}function u(t,e){var n=b.animation?c(k(t),null,0):1;e(n)}function m(t){var e=b.animation?1/c(b.animationSteps,Number.MAX_VALUE,1):1,n=b.animation?0:1;C(function(){n+=e,u(n,t),1>=n?C(arguments.callee):b.afterDrawed.call(d)})}function l(t){return Math.max.apply(null,t)}function p(t){return Math.min.apply(null,t)}function f(t){return!isNaN(parseFloat(t))&&isFinite(t)}function c(t,e,n){return f(e)&&t>e?e:f(n)&&n>t?n:t}var d=this,h=d.width(),w=d.height(),g=h/2,v=w/2,y=Math.cos,T=Math.sin,S=Math.PI,b=$.extend({segmentShowStroke:!0,segmentStrokeColor:"rgba(0,0,0, 0,4)",segmentStrokeWidth:1,baseColor:"rgba(0,0,0,0.5)",baseOffset:2,edgeOffset:10,percentageInnerCutout:75,animation:!0,animationSteps:90,animationEasing:"easeInOutExpo",animateRotate:!0,tipOffsetX:-8,tipOffsetY:-45,tipClass:"doughnutTip",summaryClass:"doughnutSummary",summaryTitle:"TOTAL:",summaryTitleClass:"doughnutSummaryTitle",summaryNumberClass:"doughnutSummaryNumber",beforeDraw:function(){},afterDrawed:function(){},onPathEnter:function(t,e){},onPathLeave:function(t,e){}},e),x={linear:function(t){return t},easeInOutExpo:function(t){var e=.5>t?8*t*t*t*t:1-8*--t*t*t*t;return e>1?1:e}},C=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();b.beforeDraw.call(d);var A=$('<svg width="'+h+'" height="'+w+'" viewBox="0 0 '+h+" "+w+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"></svg>').appendTo(d),O=[],k=x[b.animationEasing],E=p([w/2,h/2])-b.edgeOffset,M=E*(b.percentageInnerCutout/100),N=0,F=E+b.baseOffset,L=M-b.baseOffset;$(document.createElementNS("http://www.w3.org/2000/svg","path")).attr({d:n(F,L),fill:b.baseColor}).appendTo(A);var I=$(document.createElementNS("http://www.w3.org/2000/svg","g"));I.attr({opacity:0}).appendTo(A);for(var R=$('<div class="'+b.tipClass+'" />').appendTo("body").hide(),q=R.width(),D=R.height(),P=2*(M-(E-M)),X=$('<div class="'+b.summaryClass+'" />').appendTo(d).css({width:P+"px",height:P+"px","margin-left":-(P/2)+"px","margin-top":-(P/2)+"px"}),j=$('<p class="'+b.summaryTitleClass+'">'+b.summaryTitle+"</p>").appendTo(X),Y=$('<p class="'+b.summaryNumberClass+'"></p>').appendTo(X).css({opacity:0}),Z=0,W=t.length;W>Z;Z++)N+=t[Z].value,O[Z]=$(document.createElementNS("http://www.w3.org/2000/svg","path")).attr({"stroke-width":b.segmentStrokeWidth,stroke:b.segmentStrokeColor,fill:t[Z].color,"data-order":Z}).appendTo(I).on("mouseenter",a).on("mouseleave",o).on("mousemove",i);return m(r),d}}(jQuery);